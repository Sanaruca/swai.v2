<header class="xlayout flex flex-wrap gap-5 justify-between items-center">
  <section>
    <h3>{{ NIVEL_ACADEMICO_CARDINAL_MAP[cantidad_de_estudiantes.numero] }} Año</h3>
    <p class="text-sm">{{ cantidad_de_estudiantes.nombre }}</p>
  </section>
  <section class="flex gap-3 items-center">
    <p-button label="Imprimir" icon="pi pi-print" variant="outlined" (onClick)="inprimir.toggle($event)" [loading]="loadings.imprimir"/>
    <a routerLink="/admin/estudiantes/registrar" [queryParams]="{nivel_academico: NIVEL_ACADEMICO}" pButton class="font-semibold">
      <i class="pi pi-plus"></i> Registrar estudiante
    </a>
    <p-button icon="pi pi-ellipsis-h" severity="secondary" size="large" (onClick)="acciones.toggle($event)"></p-button>
  </section>
</header>

<nav class="xlayout | flex mt-5 gap-4 overflow-auto">
  <aw-info-card
    label="Total de estudiantes"
    icon="pi pi-users"
    [value]="cantidad_de_estudiantes.total"
  ></aw-info-card>

  <aw-info-card
    label="Estudiantes Activos"
    icon="pi pi-check-circle text-green-500"
    [value]="cantidad_de_estudiantes.activos"
    className="bg-green-100 dark:bg-green-600"
    iconContentClassName="bg-green-200"
  ></aw-info-card>

  <aw-info-card
    label="Estudiantes No inscritos"
    icon="pi pi-exclamation-circle text-yellow-600"
    [value]="cantidad_de_estudiantes.no_inscritos"
    className="bg-yellow-100 dark:bg-yellow-600"
    iconContentClassName="bg-yellow-200"
  ></aw-info-card>

</nav>

<nav class="mt-5 xlayout | overflow-auto pb-2">
  <ul class="flex gap-4">
    @for (seccion of cantidad_de_estudiantes.secciones; track $index) {
      <li>
        <a
        [routerLink]="['/admin/niveles_academicos', NIVEL_ACADEMICO, seccion.seccion]" 
        class="inline-block border rounded-xl p-5 min-w-80 group/seccion transition-colors bg-white dark:bg-surface-900 dark:hover:bg-surface-800" [attr.data-color]="ColorSeccion.getColor(seccion.seccion)"
        >
          <section class="flex justify-between items-center">
            <div class="flex gap-2">
              <div class="size-10 grid place-items-center rounded-full flex-none {{obtener_color_seccion_class(seccion.seccion, true)}}"
              >
                <i class="pi pi-users"></i>
              </div>
              <div class="min-w-max">
                <p class="font-medium">Seccion {{ seccion.seccion }}</p>
                <span class="text-xl font-semibold">{{ seccion.total }}</span>
              </div>
              <i class="pi pi-external-link text-[0.8rem] relative top-1 group-hover/seccion:text-muted-color text-transparent transition-colors"></i>
            </div>
            <span class="grid place-items-center w-12 h-8 border rounded-full tag">{{seccion.seccion}}</span>
          </section>
          <section class="mt-3 pt-3 flex border-t gap-2 items-center text-[.9rem]">
            @if (seccion.profesor_guia) {
              <p-avatar [label]="SECCIONES_ACADEMICAS_MAP[seccion.id].profesor_guia! | nombre : 'iniciales'" shape="circle" class="size-10 my-1"/>
              <div>
                <p class="font-medium">{{seccion.profesor_guia}}</p>
                <p class="text-[.9em]">Profesor(a) guía</p>
              </div>
              <i class="pi pi-check-circle text-green-500 ml-auto"></i>
            } @else {
              <p-avatar icon="pi pi-user" class="bg-gray-200 dark:bg-gray-700 text-gray-500" shape="circle" class="size-10 my-1"/>
              <p class="text-muted-color">Sin docente asignado</p>
                <i class="pi pi-exclamation-circle text-yellow-500 ml-auto"></i>
            }
          </section>
        </a>
      </li>
    }
  </ul>
</nav>

<section class="xlayout | mt-4">
  <h5>Materias ({{ pensum.areas_de_formacion.length }})</h5>
  <ul class="mt-3 flex flex-wrap gap-1">
    @for (area_de_formacion of pensum.areas_de_formacion; track $index) {
    <li>
      <p-tag
        icon="pi pi-book"
        [value]="area_de_formacion.nombre"
        [rounded]="true"
        styleClass="bg-slate-100 text-current dark:bg-surface-800"
      />
    </li>
    }
  </ul>
</section>

<section class="card | mt-5">
  <h6>Estudiantes</h6>
  <aw-tabla-de-estudiantes [filtros_estaticos]="[{campo: 'nivel_academico', condicion: NumberCondicion.IGUAL, valor: NIVEL_ACADEMICO}]" [omitir_campos_filtros]="['nivel_academico']"/>
</section>

<p-menu [model]="inprimir_menu" [popup]="true" #inprimir/>
<p-menu [model]="acciones_menu" [popup]="true" #acciones/>
<aw-modal-promover-nivel-academico [nivel_academico]="NIVEL_ACADEMICO" />
<aw-modal-pensum [nivel_academico]="NIVEL_ACADEMICO" (success)="on_pensum_success($event)" [close_on_success]="true"/>
<aw-modal-exportar-estudiantes [nivel_academico]="NIVEL_ACADEMICO" (success)="on_exportar_estudiantes_success()" [close_on_success]="true"/>